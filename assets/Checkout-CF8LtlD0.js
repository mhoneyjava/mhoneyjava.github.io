var B=Object.defineProperty,M=Object.defineProperties;var P=Object.getOwnPropertyDescriptors;var L=Object.getOwnPropertySymbols;var I=Object.prototype.hasOwnProperty,T=Object.prototype.propertyIsEnumerable;var E=(t,n,s)=>n in t?B(t,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[n]=s,f=(t,n)=>{for(var s in n||(n={}))I.call(n,s)&&E(t,s,n[s]);if(L)for(var s of L(n))T.call(n,s)&&E(t,s,n[s]);return t},j=(t,n)=>M(t,P(n));import{j as e,C as d,O as K,a as R,u as W,t as S}from"./index-D_kd18Jq.js";import{r as k,L as D}from"./react-vendor-Dw5DccgK.js";import"./helmet-CAINHZvn.js";function Y({items:t,expanded:n,editingDesc:s,descInputs:m,onToggleExpanded:u,onStartEditDesc:p,onCancelEditDesc:b,onSaveDesc:x,onChangeDescInput:N}){const v=t.reduce((c,l)=>c+(l.price||0)*l.qty,0);return e.jsxs("div",{children:[e.jsx("div",{className:"space-y-4",children:t.map((c,l)=>{var g,y;return e.jsx(z,{item:c,index:l,expanded:n[l],editingDesc:s[l],descValue:(y=(g=m[l])!=null?g:c.description)!=null?y:"",onToggleExpand:()=>u(l),onStartEdit:()=>{var h;return p(l,(h=c.description)!=null?h:"")},onCancelEdit:()=>b(l),onSaveEdit:h=>x(l,h),onInputChange:h=>N(l,h)},l)})}),e.jsxs("div",{className:"mt-6 pt-6 border-t border-stone-200",children:[e.jsxs("div",{className:"flex justify-between items-center text-lg",children:[e.jsx("span",{className:"font-bold text-stone-900",children:"Subtotal"}),e.jsxs("span",{className:"text-2xl font-bold text-amber-700",children:[d.SYMBOL," ",v.toLocaleString(d.LOCALE)]})]}),e.jsx("p",{className:"text-sm text-stone-500 mt-2",children:"*Belum termasuk ongkos kirim"})]})]})}function z({item:t,index:n,expanded:s,editingDesc:m,descValue:u,onToggleExpand:p,onStartEdit:b,onCancelEdit:x,onSaveEdit:N,onInputChange:v}){var g;const c=(t.price||0)*t.qty,l=t.variant&&(t.variant.includes(`
`)||t.variant.length>120);return e.jsxs("div",{className:"flex gap-4 pb-4 border-b border-stone-100 last:border-0 last:pb-0 animate-fade-in",style:{animationDelay:`${n*.05}s`,opacity:0,animationFillMode:"forwards"},children:[e.jsx("div",{className:"w-20 h-20 rounded-xl overflow-hidden bg-gradient-to-br from-amber-50 to-yellow-100 flex-shrink-0",children:e.jsx(K,{src:(g=t.image)!=null?g:"/logo.svg",alt:t.name||"Product",className:"w-full h-full object-contain object-center"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-bold text-stone-900",children:t.name}),t.variant&&(s?e.jsx("p",{className:"text-sm text-stone-600 mt-1 whitespace-pre-line",children:t.variant}):e.jsx("p",{className:"text-sm text-stone-600 mt-1 line-clamp-2",children:t.variant})),e.jsx(F,{editing:m,value:u,description:t.description,onStartEdit:b,onCancelEdit:x,onSaveEdit:N,onChange:v}),l&&e.jsx("button",{type:"button",onClick:p,className:"text-xs mt-2 text-stone-500 hover:text-stone-700",children:s?"Show less":"Show more"}),e.jsx("div",{className:"flex items-center justify-between mt-2",children:t.price&&e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"text-sm text-stone-500",children:[d.SYMBOL," ",t.price.toLocaleString(d.LOCALE)," Ã— ",t.qty]}),e.jsxs("p",{className:"font-bold text-amber-700",children:[d.SYMBOL," ",c.toLocaleString(d.LOCALE)]})]})})]})]})}function F({editing:t,value:n,description:s,onStartEdit:m,onCancelEdit:u,onSaveEdit:p,onChange:b}){return t?e.jsxs("div",{className:"mt-2",children:[e.jsx("textarea",{value:n,onChange:x=>b(x.target.value),rows:2,className:"w-full rounded-lg border border-stone-300 px-3 py-2 focus:ring-2 focus:ring-amber-500 focus:border-transparent transition-all resize-none"}),e.jsxs("div",{className:"mt-2 flex gap-2",children:[e.jsx("button",{type:"button",onClick:()=>p(n),className:"rounded-lg bg-amber-600 text-white px-3 py-1 text-sm",children:"Simpan"}),e.jsx("button",{type:"button",onClick:u,className:"text-stone-500 text-sm",children:"Batal"})]})]}):e.jsx("div",{className:"mt-2 mb-2 text-sm text-stone-600",children:s?e.jsxs("div",{children:[e.jsx("div",{className:"break-words",children:s}),e.jsx("div",{className:"mt-2 flex justify-start",children:e.jsx("button",{type:"button",onClick:m,className:"text-sm text-amber-600 hover:underline",children:"Edit"})})]}):e.jsx("button",{type:"button",onClick:m,className:"text-sm text-stone-500 hover:text-stone-700",children:"Tambahkan deskripsi"})})}function H({onSubmit:t}){return e.jsxs("form",{onSubmit:t,className:"rounded-2xl border border-stone-200 bg-white shadow-lg overflow-hidden sticky top-24",children:[e.jsx("div",{className:"p-6 border-b border-stone-200 bg-gradient-to-r from-amber-50 to-yellow-50",children:e.jsx("h2",{className:"text-xl font-bold text-stone-900",children:"Data Penerima"})}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsx("input",{name:"name",required:!0,placeholder:"Masukkan nama lengkap",className:"w-full rounded-lg border border-stone-300 px-4 py-2.5 focus:ring-2 focus:ring-amber-500 focus:border-transparent transition-all","aria-label":"Nama Lengkap"}),e.jsx("input",{name:"phone",required:!0,type:"tel",placeholder:"08xxxxxxxxxx",className:"w-full rounded-lg border border-stone-300 px-4 py-2.5 focus:ring-2 focus:ring-amber-500 focus:border-transparent transition-all","aria-label":"No. HP/WhatsApp"}),e.jsx("input",{type:"email",name:"email",placeholder:"email@example.com",className:"w-full rounded-lg border border-stone-300 px-4 py-2.5 focus:ring-2 focus:ring-amber-500 focus:border-transparent transition-all","aria-label":"Email"}),e.jsx("textarea",{name:"address",rows:3,required:!0,placeholder:"Jalan, RT/RW, Kelurahan, Kecamatan, Kota, Provinsi, Kode Pos",className:"w-full rounded-lg border border-stone-300 px-4 py-2.5 focus:ring-2 focus:ring-amber-500 focus:border-transparent transition-all resize-none","aria-label":"Alamat Lengkap"}),e.jsx("textarea",{name:"notes",rows:2,placeholder:"Catatan tambahan (opsional)",className:"w-full rounded-lg border border-stone-300 px-4 py-2.5 focus:ring-2 focus:ring-amber-500 focus:border-transparent transition-all resize-none","aria-label":"Catatan Pesanan"}),e.jsxs("button",{type:"submit",className:"w-full mt-4 rounded-xl bg-gradient-to-r from-green-600 to-emerald-700 text-white px-6 py-3.5 hover:from-green-700 hover:to-emerald-800 font-medium shadow-lg hover:shadow-xl transform hover:-translate-y-1 transition-all flex items-center justify-center gap-2",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"})}),"Kirim Order via WhatsApp"]})]})]})}function G(){var C;const{items:t,updateItem:n}=R(),{config:s}=W(),m=(((C=s==null?void 0:s.contact)==null?void 0:C.whatsapp)||"").replace(/\D/g,""),[u,p]=k.useState({}),[b,x]=k.useState({}),[N,v]=k.useState({}),c=t.reduce((i,r)=>i+(r.price||0)*r.qty,0),l=i=>{i.preventDefault();const r=new FormData(i.currentTarget),a=[];a.push("*Order MHoney*"),a.push(""),t.forEach((o,w)=>{const _=(o.price||0)*o.qty;a.push(`${w+1}. ${o.name}${o.variant?" - "+o.variant:""}${o.description?" - "+o.description:""} x${o.qty}`),a.push(`   ${d.SYMBOL} ${_.toLocaleString(d.LOCALE)}`)}),a.push(""),a.push(`*Subtotal: ${d.SYMBOL} ${c.toLocaleString(d.LOCALE)}*`),a.push("_(belum termasuk ongkir)_"),a.push(""),a.push("Data Penerima:"),a.push(`Nama: ${r.get("name")}`),a.push(`HP/WA: ${r.get("phone")}`),a.push(`Email: ${r.get("email")||"-"}`),a.push(`Alamat: ${r.get("address")}`),a.push(`Catatan: ${r.get("notes")||"-"}`);const q=encodeURIComponent(a.join(`
`));if(!m){alert("Nomor WhatsApp belum tersedia.");return}S("begin_checkout",{value:c,currency:d.CODE,items_count:t.length,total_quantity:t.reduce((o,w)=>o+w.qty,0),items:t.map(o=>({item_id:o.id,item_name:o.name,item_variant:o.variant,price:o.price,quantity:o.qty}))});const A=`https://wa.me/${m}?text=${q}`;window.open(A,"_blank"),S("submit_order_whatsapp",{value:c,currency:d.CODE,items_count:t.length,total_quantity:t.reduce((o,w)=>o+w.qty,0)})},g=i=>{p(r=>j(f({},r),{[i]:!r[i]}))},y=(i,r)=>{x(a=>j(f({},a),{[i]:!0})),v(a=>j(f({},a),{[i]:r}))},h=i=>{x(r=>j(f({},r),{[i]:!1}))},O=(i,r)=>{n(i,{description:r}),x(a=>j(f({},a),{[i]:!1}))},$=(i,r)=>{v(a=>j(f({},a),{[i]:r}))};return t.length===0?e.jsxs("div",{className:"space-y-16",children:[e.jsxs("section",{className:"relative overflow-hidden bg-gradient-to-br from-amber-50 via-yellow-50 to-amber-100 -mt-8",children:[e.jsx("div",{className:"relative max-w-6xl mx-auto px-4 py-12 md:py-16",children:e.jsx("div",{className:"max-w-3xl animate-fade-in",children:e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-stone-900 leading-tight",children:"Checkout"})})}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-16 bg-gradient-to-t from-white to-transparent"})]}),e.jsx("section",{className:"max-w-6xl mx-auto px-4",children:e.jsxs("div",{className:"rounded-2xl border border-stone-200 bg-white p-12 text-center animate-fade-in",children:[e.jsx("div",{className:"text-6xl mb-4",children:"ðŸ›’"}),e.jsx("h2",{className:"text-2xl font-bold text-stone-900 mb-2",children:"Keranjang kosong"}),e.jsx("p",{className:"text-stone-600 mb-6",children:"Tambahkan produk terlebih dahulu untuk melanjutkan checkout."}),e.jsxs(D,{to:"/products",className:"inline-flex items-center gap-2 rounded-xl bg-gradient-to-r from-amber-600 to-amber-700 text-white px-6 py-3 shadow-lg hover:shadow-xl transform hover:-translate-y-1 transition-all font-medium",children:["Belanja Produk",e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})})]}):e.jsxs("div",{className:"space-y-16",children:[e.jsxs("section",{className:"relative overflow-hidden bg-gradient-to-br from-amber-50 via-yellow-50 to-amber-100 -mt-8",children:[e.jsx("div",{className:"relative max-w-6xl mx-auto px-4 py-12 md:py-16",children:e.jsxs("div",{className:"max-w-3xl animate-fade-in",children:[e.jsxs(D,{to:"/cart",className:"inline-flex items-center gap-2 text-amber-700 hover:text-amber-800 font-medium text-sm mb-4 group",children:[e.jsx("svg",{className:"w-4 h-4 transform group-hover:-translate-x-1 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Kembali ke Keranjang"]}),e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-stone-900 leading-tight mb-2",children:e.jsx("span",{className:"bg-gradient-to-r from-amber-600 to-amber-800 bg-clip-text text-transparent",children:"Checkout"})}),e.jsx("p",{className:"text-lg text-stone-600",children:"Lengkapi data di bawah untuk menyelesaikan pesanan Anda"})]})}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-16 bg-gradient-to-t from-white to-transparent"})]}),e.jsx("section",{className:"max-w-6xl mx-auto px-4",children:e.jsxs("div",{className:"grid gap-8 lg:grid-cols-3",children:[e.jsx("div",{className:"lg:col-span-2 animate-fade-in",children:e.jsxs("div",{className:"rounded-2xl border border-stone-200 bg-white shadow-lg overflow-hidden",children:[e.jsx("div",{className:"p-6 border-b border-stone-200 bg-gradient-to-r from-amber-50 to-yellow-50",children:e.jsx("h2",{className:"text-xl font-bold text-stone-900",children:"Ringkasan Pesanan"})}),e.jsx("div",{className:"p-6",children:e.jsx(Y,{items:t,expanded:u,editingDesc:b,descInputs:N,onToggleExpanded:g,onStartEditDesc:y,onCancelEditDesc:h,onSaveDesc:O,onChangeDescInput:$})})]})}),e.jsx("div",{className:"lg:col-span-1 animate-fade-in-scale",children:e.jsx(H,{onSubmit:l})})]})})]})}export{G as default};
