import{a as ae,j as a}from"./index-emafHZTv.js";import{e as se,b as te,r as m,L as $}from"./react-vendor-Dw5DccgK.js";import{u as ne,c as K,b as C}from"./useItems-CIeSmGIL.js";import{u as re,g as ie}from"./useContainers-DzLj7aha.js";import{S as le}from"./SEO-BZm7sRYp.js";import"./helmet-CAINHZvn.js";function he(){var M,B,D,H;const{slug:k,id:x}=se(),S=te(),{items:L,loading:Q}=ne(),{containers:W}=re(),_=x!=null?x:k,e=K(L,_),{addItem:G}=ae(),[c,V]=m.useState(0),[f,j]=m.useState(0),[N,v]=m.useState(1),[P,R]=m.useState(""),u=(()=>{if(!e)return[];const s=[];if(e.images&&e.images.length>0&&s.push(...e.images),e.variants&&e.variants.length>0)for(const t of e.variants)t.image&&!s.includes(t.image)&&s.push(t.image);return e.image&&!s.includes(e.image)&&s.push(e.image),s})();if(m.useEffect(()=>{var l;(l=e==null?void 0:e.variants)!=null&&l[0]&&V(0);const s=C(e!=null?e:{},0),t=u.indexOf(s);j(t>=0?t:0)},[e]),m.useEffect(()=>{k&&!x&&e&&S(`/products/${e.id}`,{replace:!0})},[k,x,e,S]),m.useEffect(()=>{var t,l;const s=(l=(t=e==null?void 0:e.variants)==null?void 0:t[c])==null?void 0:l.image;if(s){const i=u.indexOf(s);j(i>=0?i:0)}else{const i=C(e!=null?e:{},c),n=u.indexOf(i);j(n>=0?n:0)}},[c,e]),Q)return a.jsx("div",{className:"max-w-4xl mx-auto px-4 py-10",children:a.jsx("p",{className:"text-stone-700",children:"Memuat produk..."})});if(!e)return a.jsx("div",{className:"max-w-4xl mx-auto px-4 py-10",children:a.jsx("p",{className:"text-stone-700",children:"Produk tidak ditemukan."})});const X=()=>{var t,l,i,n;const s=e.variants[c];G({type:e.type,id:e.id,name:e.type==="hamper"?`Hampers: ${e.name}`:e.name,variant:s.name,price:s.price,qty:N,description:P||void 0,image:(n=(i=(l=s.image)!=null?l:(t=e.images)==null?void 0:t[f])!=null?i:e.image)!=null?n:"/logo.svg"}),v(1),R("")},E=e.variants[c],r=e.type==="honey";return a.jsxs(a.Fragment,{children:[a.jsx(le,{title:e.name,description:e.description,keywords:`${e.name}, ${e.type==="honey"?"madu murni, madu asli, MHoney":"hampers premium, paket hadiah, Sundakawa"}, ${((M=e.tags)!=null?M:[]).join(", ")}`,url:r?`/products/${e.slug}`:`/sundakawa/catalogue/${e.slug}`,image:(D=(B=e.images)==null?void 0:B[0])!=null?D:e.image,type:"product",productName:e.name,productPrice:E.price,productCurrency:"IDR",productAvailability:"InStock",productCategory:e.category,breadcrumbs:[{name:"Home",url:"/"},{name:r?"Produk":"Sundakawa",url:r?"/products":"/sundakawa/catalogue"},{name:e.name,url:r?`/products/${e.slug}`:`/sundakawa/catalogue/${e.slug}`}]}),a.jsxs("div",{className:"max-w-6xl mx-auto px-4 grid md:grid-cols-2 gap-8",children:[a.jsxs("div",{className:"flex flex-col gap-4",children:[a.jsx("div",{className:`rounded-xl overflow-hidden flex items-center justify-center aspect-square ${r?"bg-amber-50":"bg-green-50"}`,children:a.jsx("img",{loading:"lazy",src:(H=u[f])!=null?H:C(e,c),alt:`${e.name} - gambar ${f+1}`,className:"w-full h-full object-contain object-center"})}),u.length>1&&a.jsx("div",{className:"flex gap-2 overflow-x-auto",children:u.map((s,t)=>a.jsx("button",{className:`rounded-lg border ${t===f?"border-amber-600 ring-2 ring-amber-300":"border-stone-200"} p-1`,onClick:()=>j(t),"aria-label":`Pilih gambar ${t+1}`,children:a.jsx("img",{loading:"lazy",src:s,alt:`${e.name} - thumb ${t+1}`,className:"h-16 w-16 object-contain"})},`thumb-${t}`))})]}),a.jsxs("div",{className:"py-2",children:[a.jsx("nav",{"aria-label":"Breadcrumb",className:"mb-3 text-sm text-stone-600",children:a.jsxs("ol",{className:"flex items-center gap-2",children:[a.jsx("li",{children:a.jsx($,{to:"/",className:"hover:underline",children:"Beranda"})}),a.jsx("li",{children:a.jsx("span",{"aria-hidden":"true",children:"/"})}),a.jsx("li",{children:a.jsx($,{to:r?"/products":"/sundakawa/catalogue",className:"hover:underline",children:r?"Produk":"Sundakawa"})}),a.jsx("li",{children:a.jsx("span",{"aria-hidden":"true",children:"/"})}),a.jsx("li",{children:a.jsx("span",{className:"text-stone-900 font-medium","aria-current":"page",children:e.name})})]})}),a.jsx("div",{className:"flex items-center gap-2 mb-2",children:a.jsx("span",{className:`text-xs font-semibold px-2 py-1 rounded-full ${r?"bg-amber-100 text-amber-800":"bg-green-100 text-green-800"}`,children:r?"MHoney":"Sundakawa"})}),a.jsx("h1",{className:"text-3xl font-semibold text-stone-900",children:e.name}),a.jsx("p",{className:"text-stone-700 mt-2",children:e.description}),e.tags&&e.tags.length>0&&a.jsx("ul",{className:"flex flex-wrap gap-2 mt-3 text-sm text-stone-700",children:e.tags.map(s=>a.jsx("li",{className:"rounded-full bg-stone-100 border border-stone-200 px-3 py-1",children:s},s))}),e.includes&&e.includes.length>0&&a.jsxs("div",{className:"mt-4",children:[a.jsx("h2",{className:"font-semibold text-stone-900",children:"Isi Paket"}),a.jsx("ul",{className:"list-disc pl-6 text-stone-700 mt-2",children:e.includes.reduce((s,t,l)=>((t||"").split(",").map(n=>n.trim()).filter(Boolean).forEach((n,h)=>{var q,z;const d=n.match(/^\s*(\d+)\s*\*\s*(.+)$/),g=d?Number(d[1]):1,w=d?d[2]:n,[y,p]=(w||"").split(":"),Y=(y||"").trim(),b=(p||"").trim(),o=K(L,Y);if(!o){s.push(a.jsx("li",{children:n},`${t}-${h}`));return}let O=0;if(b){const A=((q=o.variants)!=null?q:[]).findIndex(I=>{var U,F,J;return((U=I.name)!=null?U:"").toLowerCase()===b.toLowerCase()||((F=I.name)!=null?F:"").toLowerCase().includes(b.toLowerCase())||b.toLowerCase().includes(((J=I.name)!=null?J:"").toLowerCase())});A>=0&&(O=A)}const T=(z=o.variants)==null?void 0:z[O],Z=o.type==="honey"?`/products/${o.slug}`:`/sundakawa/catalogue/${o.slug}`,ee=o.available==="unlisted";s.push(a.jsxs("li",{children:[ee?a.jsx("span",{className:"text-stone-700",children:o.name}):a.jsx($,{to:Z,className:"text-green-700 hover:underline",children:o.name}),b&&T&&a.jsxs("span",{className:"text-stone-600",children:[" — ",T.name]}),g>1&&a.jsxs("span",{className:"text-stone-600",children:["  ×",g]})]},`${t}-${h}`))}),s),[])})]}),e.container&&a.jsxs("div",{className:"mt-4",children:[a.jsx("h2",{className:"font-semibold text-stone-900",children:"Wadah"}),a.jsx("div",{className:"mt-2 text-stone-700",children:(()=>{var g,w;const[s,t]=(e.container||"").split(":"),l=(s||"").trim(),i=(t||"").trim(),n=ie(W,l);if(!n)return a.jsx("span",{children:e.container});let h=0;if(i){const y=((g=n.variants)!=null?g:[]).findIndex(p=>(p.name||"").toLowerCase()===i.toLowerCase()||(p.name||"").toLowerCase().includes(i.toLowerCase())||i.toLowerCase().includes((p.name||"").toLowerCase()));y>=0&&(h=y)}const d=(w=n.variants)==null?void 0:w[h];return a.jsx("div",{className:"flex items-center gap-3",children:a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:n.name}),i&&d&&a.jsx("div",{className:"text-sm text-stone-600",children:d.name})]})})})()})]}),e.variants.length>1&&a.jsxs("div",{className:"mt-6",children:[a.jsx("label",{className:"block text-sm font-medium text-stone-800",children:r?"Ukuran":"Varian"}),a.jsx("div",{className:"mt-2 grid grid-cols-2 md:grid-cols-4 gap-2",children:e.variants.map((s,t)=>a.jsxs("button",{onClick:()=>V(t),className:`rounded-lg px-3 py-2 border ${t===c?`border-${r?"amber":"green"}-600 bg-${r?"amber":"green"}-50 text-${r?"amber":"green"}-900`:"border-stone-300 bg-white text-stone-800 hover:border-stone-400"}`,children:[a.jsx("div",{className:"font-medium",children:s.name}),a.jsxs("div",{className:"text-xs mt-1",children:["Rp ",s.price.toLocaleString("id-ID")]})]},s.name))})]}),a.jsx("div",{className:"mt-6",children:a.jsxs("div",{className:"text-2xl font-bold text-stone-900",children:["Rp ",E.price.toLocaleString("id-ID")]})}),a.jsxs("div",{className:"mt-6",children:[a.jsx("label",{className:"block text-sm font-medium text-stone-800 mb-2",children:"Jumlah"}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("button",{onClick:()=>v(Math.max(1,N-1)),className:"w-10 h-10 rounded-lg border border-stone-300 bg-white hover:bg-stone-50 flex items-center justify-center font-semibold text-stone-700",children:"−"}),a.jsx("input",{type:"number",min:"1",value:N,onChange:s=>v(Math.max(1,Number(s.target.value)||1)),className:"w-20 h-10 rounded-lg border border-stone-300 px-3 text-center font-medium"}),a.jsx("button",{onClick:()=>v(N+1),className:"w-10 h-10 rounded-lg border border-stone-300 bg-white hover:bg-stone-50 flex items-center justify-center font-semibold text-stone-700",children:"+"})]})]}),a.jsxs("div",{className:"mt-4",children:[a.jsx("label",{className:"block text-sm font-medium text-stone-800 mb-1.5",children:"Tambahkan Deskripsi"}),a.jsx("textarea",{value:P,onChange:s=>R(s.target.value),rows:2,placeholder:"Tambahkan catatan (seperti tulisan pada kartu ucapan atau request khusus lainnya) untuk produk ini (opsional)",className:"w-full rounded-lg border border-stone-300 px-3 py-2 focus:ring-2 focus:ring-amber-500 focus:border-transparent transition-all resize-none"})]}),a.jsx("div",{className:"mt-6 flex gap-3",children:a.jsx("button",{onClick:X,className:`rounded-lg text-white px-6 py-3 font-medium ${r?"bg-amber-700 hover:bg-amber-800":"bg-green-700 hover:bg-green-800"}`,children:"Tambah ke Keranjang"})})]})]})]})}export{he as default};
